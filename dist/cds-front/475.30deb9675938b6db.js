"use strict";(self.webpackChunkcds_front=self.webpackChunkcds_front||[]).push([[475],{4475:(A,x,o)=>{o.r(x),o.d(x,{SecureModule:()=>ue});var u=o(6895),d=o(646),h=o(5481),e=o(1571),b=o(629);function g(i,s){1&i&&e._UZ(0,"div",11)}function D(i,s){if(1&i&&(e.TgZ(0,"a",13),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("routerLink",t.link),e.xp6(1),e.hij(" ",t.name," ")}}function c(i,s){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,D,2,2,"a",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.menu)}}let _=(()=>{class i{constructor(t,n,a,r){this.router=t,this.authService=n,this.el=a,this.renderer=r,this.userconnected=h.g.user,this.menu=[],this.menu=[{name:"Dashbord",link:"/dashboard",acces:"super"},{name:"Utilisateur",link:"/dashboard",acces:"super"},{name:"Message",link:"/message/list",acces:"super"}]}ngOnInit(){this.getUserConnected()}getUserConnected(){this.authService.currentUser().subscribe({next:t=>{this.userconnected=t.data.user,console.log("succes log ",t.data.user)},error:t=>{console.log("error log ",t)}})}logOut(){localStorage.removeItem("token"),localStorage.removeItem("userconnected"),h.g.user=null,this.router.navigate(["/"])}showNavbar(){const t=this.el?.nativeElement.querySelector(".navbar-collapse");t&&(t.classList.contains("show")?this.renderer.removeClass(t,"show"):this.renderer.addClass(t,"show"))}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(d.F0),e.Y36(b.e),e.Y36(e.SBq),e.Y36(e.Qsj))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-secure"]],decls:14,vars:2,consts:[[1,"navbar","shadow","navbar-expand-lg","mybg-color","text-white","fixed-top"],[1,"container-fluid","texte-white"],["href","javascript:void(0)",1,"navbar-brand"],["src","assets/images/cds.jpg","alt","Bootstrap","width","200","height","auto",1,"img-fluid"],["type","button",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],["class","navbar-nav mx-auto",4,"ngIf"],[1,"d-flex","my-2","my-lg-0"],["type","button",1,"btn","btn-white","my-2","my-sm-0",2,"color","rgb(255, 255, 255)",3,"click"],["aria-hidden","true",1,"fa","fa-sign-out"],[1,"navbar-nav","mx-auto"],["class","nav-link active w-col","style","color: rgb(255, 255, 255);",3,"routerLink",4,"ngFor","ngForOf"],[1,"nav-link","active","w-col",2,"color","rgb(255, 255, 255)",3,"routerLink"]],template:function(n,a){1&n&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"button",4),e.NdJ("click",function(){return a.showNavbar()}),e._UZ(5,"span",5),e.qZA(),e.TgZ(6,"div",6),e.YNc(7,g,1,0,"div",7),e.YNc(8,c,2,1,"div",7),e.TgZ(9,"div",8)(10,"a",9),e.NdJ("click",function(){return a.logOut()}),e._UZ(11,"i",10),e._uU(12," D\xe9connexion "),e.qZA()()()()(),e._UZ(13,"router-outlet")),2&n&&(e.xp6(7),e.Q6J("ngIf",a.userconnected&&"super"!==a.userconnected.role),e.xp6(1),e.Q6J("ngIf",a.userconnected&&"super"===a.userconnected.role))},dependencies:[u.sg,u.O5,d.lC,d.rH]})}return i})();var k=o(4332),U=o.n(k),E=o(2340),w=o(8613),S=o(4873),O=o(6199),m=o(433);function N(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("keyup.enter",function(){e.CHM(t),e.oxw(3);const a=e.MAs(1);return e.KtG(a.previous())})("click",function(){e.CHM(t),e.oxw(3);const a=e.MAs(1);return e.KtG(a.previous())}),e._uU(1),e.TgZ(2,"span",13),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.previousLabel," "),e.xp6(2),e.Oqu(t.screenReaderPageLabel)}}function F(i,s){if(1&i&&(e.TgZ(0,"span",14),e._uU(1),e.TgZ(2,"span",13),e._uU(3),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.previousLabel," "),e.xp6(2),e.Oqu(t.screenReaderPageLabel)}}function B(i,s){if(1&i&&(e.TgZ(0,"li",9),e.YNc(1,N,4,2,"a",10),e.YNc(2,F,4,2,"span",11),e.qZA()),2&i){e.oxw(2);const t=e.MAs(1);e.ekj("disabled",t.isFirstPage()),e.xp6(1),e.Q6J("ngIf",1<t.getCurrent()),e.xp6(1),e.Q6J("ngIf",t.isFirstPage())}}function q(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw().$implicit;e.oxw(2);const r=e.MAs(1);return e.KtG(r.setCurrent(a.value))})("click",function(){e.CHM(t);const a=e.oxw().$implicit;e.oxw(2);const r=e.MAs(1);return e.KtG(r.setCurrent(a.value))}),e.TgZ(1,"span",13),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"number"),e.qZA()()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(2),e.hij("",n.screenReaderPageLabel," "),e.xp6(2),e.Oqu("..."===t.label?t.label:e.xi3(5,2,t.label,""))}}function J(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"span",16)(2,"span",13),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"number"),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(3),e.hij("",n.screenReaderCurrentLabel," "),e.xp6(2),e.Oqu("..."===t.label?t.label:e.xi3(6,2,t.label,""))}}function R(i,s){if(1&i&&(e.TgZ(0,"li"),e.YNc(1,q,6,5,"a",10),e.YNc(2,J,7,5,"ng-container",15),e.qZA()),2&i){const t=s.$implicit;e.oxw(2);const n=e.MAs(1);e.ekj("current",n.getCurrent()===t.value)("ellipsis","..."===t.label),e.xp6(1),e.Q6J("ngIf",n.getCurrent()!==t.value),e.xp6(1),e.Q6J("ngIf",n.getCurrent()===t.value)}}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("keyup.enter",function(){e.CHM(t),e.oxw(3);const a=e.MAs(1);return e.KtG(a.next())})("click",function(){e.CHM(t),e.oxw(3);const a=e.MAs(1);return e.KtG(a.next())}),e._uU(1),e.TgZ(2,"span",13),e._uU(3),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.nextLabel," "),e.xp6(2),e.Oqu(t.screenReaderPageLabel)}}function z(i,s){if(1&i&&(e.TgZ(0,"span",14),e._uU(1),e.TgZ(2,"span",13),e._uU(3),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.nextLabel," "),e.xp6(2),e.Oqu(t.screenReaderPageLabel)}}function $(i,s){if(1&i&&(e.TgZ(0,"li",17),e.YNc(1,Y,4,2,"a",10),e.YNc(2,z,4,2,"span",11),e.qZA()),2&i){e.oxw(2);const t=e.MAs(1);e.ekj("disabled",t.isLastPage()),e.xp6(1),e.Q6J("ngIf",!t.isLastPage()),e.xp6(1),e.Q6J("ngIf",t.isLastPage())}}function K(i,s){if(1&i&&(e.TgZ(0,"ul",4),e.YNc(1,B,3,4,"li",5),e.TgZ(2,"li",6),e._uU(3),e.qZA(),e.YNc(4,R,3,6,"li",7),e.YNc(5,$,3,4,"li",8),e.qZA()),2&i){const t=e.oxw(),n=e.MAs(1);e.ekj("responsive",t.responsive),e.xp6(1),e.Q6J("ngIf",t.directionLinks),e.xp6(2),e.AsE(" ",n.getCurrent()," / ",n.getLastPage()," "),e.xp6(1),e.Q6J("ngForOf",n.pages)("ngForTrackBy",t.trackByIndex),e.xp6(1),e.Q6J("ngIf",t.directionLinks)}}class I{constructor(){this.change=new e.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}defaultId(){return this.DEFAULT_ID}register(s){return null==s.id&&(s.id=this.DEFAULT_ID),this.instances[s.id]?this.updateInstance(s):(this.instances[s.id]=s,!0)}updateInstance(s){let t=!1;for(let n in this.instances[s.id])s[n]!==this.instances[s.id][n]&&(this.instances[s.id][n]=s[n],t=!0);return t}getCurrentPage(s){return this.instances[s]?this.instances[s].currentPage:1}setCurrentPage(s,t){if(this.instances[s]){let n=this.instances[s];t<=Math.ceil(n.totalItems/n.itemsPerPage)&&1<=t&&(this.instances[s].currentPage=t,this.change.emit(s))}}setTotalItems(s,t){this.instances[s]&&0<=t&&(this.instances[s].totalItems=t,this.change.emit(s))}setItemsPerPage(s,t){this.instances[s]&&(this.instances[s].itemsPerPage=t,this.change.emit(s))}getInstance(s=this.DEFAULT_ID){return this.instances[s]?this.clone(this.instances[s]):{}}clone(s){var t={};for(var n in s)s.hasOwnProperty(n)&&(t[n]=s[n]);return t}}const Q=Number.MAX_SAFE_INTEGER;let j=(()=>{class i{constructor(t){this.service=t,this.state={}}transform(t,n){if(!(t instanceof Array)){let C=n.id||this.service.defaultId();return this.state[C]?this.state[C].slice:t}let p,f,a=n.totalItems&&n.totalItems!==t.length,r=this.createInstance(t,n),l=r.id,v=r.itemsPerPage,T=this.service.register(r);if(!a&&t instanceof Array){if(v=+v||Q,p=(r.currentPage-1)*v,f=p+v,this.stateIsIdentical(l,t,p,f))return this.state[l].slice;{let Z=t.slice(p,f);return this.saveState(l,t,Z,p,f),this.service.change.emit(l),Z}}return T&&this.service.change.emit(l),this.saveState(l,t,t,p,f),t}createInstance(t,n){return this.checkConfig(n),{id:null!=n.id?n.id:this.service.defaultId(),itemsPerPage:+n.itemsPerPage||0,currentPage:+n.currentPage||1,totalItems:+n.totalItems||t.length}}checkConfig(t){const a=["itemsPerPage","currentPage"].filter(r=>!(r in t));if(0<a.length)throw new Error(`PaginatePipe: Argument is missing the following required properties: ${a.join(", ")}`)}saveState(t,n,a,r,l){this.state[t]={collection:n,size:n.length,slice:a,start:r,end:l}}stateIsIdentical(t,n,a,r){let l=this.state[t];return!(!l||l.size!==n.length||l.start!==a||l.end!==r)&&l.slice.every((f,v)=>f===n[a+v])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I,16))},i.\u0275pipe=e.Yjl({name:"paginate",type:i,pure:!1}),i})(),H=(()=>{class i{constructor(t,n){this.service=t,this.changeDetectorRef=n,this.maxSize=7,this.pageChange=new e.vpe,this.pageBoundsCorrection=new e.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(a=>{this.id===a&&(this.updatePageLinks(),this.changeDetectorRef.markForCheck(),this.changeDetectorRef.detectChanges())})}ngOnInit(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()}ngOnChanges(t){this.updatePageLinks()}ngOnDestroy(){this.changeSub.unsubscribe()}previous(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)}next(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)}isFirstPage(){return 1===this.getCurrent()}isLastPage(){return this.getLastPage()===this.getCurrent()}setCurrent(t){this.pageChange.emit(t)}getCurrent(){return this.service.getCurrentPage(this.id)}getLastPage(){let t=this.service.getInstance(this.id);return t.totalItems<1?1:Math.ceil(t.totalItems/t.itemsPerPage)}getTotalItems(){return this.service.getInstance(this.id).totalItems}checkValidId(){null==this.service.getInstance(this.id).id&&console.warn(`PaginationControlsDirective: the specified id "${this.id}" does not match any registered PaginationInstance`)}updatePageLinks(){let t=this.service.getInstance(this.id);const n=this.outOfBoundCorrection(t);n!==t.currentPage?setTimeout(()=>{this.pageBoundsCorrection.emit(n),this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)}outOfBoundCorrection(t){const n=Math.ceil(t.totalItems/t.itemsPerPage);return n<t.currentPage&&0<n?n:t.currentPage<1?1:t.currentPage}createPageArray(t,n,a,r){r=+r;let l=[];const p=Math.max(Math.ceil(a/n),1),f=Math.ceil(r/2),v=t<=f,T=p-f<t,C=!v&&!T;let Z=r<p,P=1;for(;P<=p&&P<=r;){let L,M=this.calculatePageNumber(P,t,r,p);L=Z&&(2===P&&(C||T)||P===r-1&&(C||v))?"...":M,l.push({label:L,value:M}),P++}return l}calculatePageNumber(t,n,a,r){let l=Math.ceil(a/2);return t===a?r:1===t?t:a<r?r-l<n?r-a+t:l<n?n-l+t:t:t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(I),e.Y36(e.sBO))},i.\u0275dir=e.lG2({type:i,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{id:"id",maxSize:"maxSize"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[e.TTD]}),i})();function y(i){return!!i&&"false"!==i}let W=(()=>{class i{constructor(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new e.vpe,this.pageBoundsCorrection=new e.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}get directionLinks(){return this._directionLinks}set directionLinks(t){this._directionLinks=y(t)}get autoHide(){return this._autoHide}set autoHide(t){this._autoHide=y(t)}get responsive(){return this._responsive}set responsive(t){this._responsive=y(t)}trackByIndex(t){return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["pagination-controls"]],inputs:{id:"id",maxSize:"maxSize",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:4,vars:4,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["role","navigation"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],["aria-disabled","true",4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],["aria-disabled","true"],[4,"ngIf"],["aria-live","polite"],[1,"pagination-next"]],template:function(t,n){if(1&t&&(e.TgZ(0,"pagination-template",0,1),e.NdJ("pageChange",function(r){return n.pageChange.emit(r)})("pageBoundsCorrection",function(r){return n.pageBoundsCorrection.emit(r)}),e.TgZ(2,"nav",2),e.YNc(3,K,6,8,"ul",3),e.qZA()()),2&t){const a=e.MAs(1);e.Q6J("id",n.id)("maxSize",n.maxSize),e.xp6(2),e.uIk("aria-label",n.screenReaderPaginationLabel),e.xp6(1),e.Q6J("ngIf",!(n.autoHide&&a.pages.length<=1))}},dependencies:[H,u.O5,u.sg,u.JJ],styles:['.ngx-pagination{margin-left:0;margin-bottom:1rem}.ngx-pagination:before,.ngx-pagination:after{content:" ";display:table}.ngx-pagination:after{clear:both}.ngx-pagination li{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;margin-right:.0625rem;border-radius:0}.ngx-pagination li{display:inline-block}.ngx-pagination a,.ngx-pagination button{color:#0a0a0a;display:block;padding:.1875rem .625rem;border-radius:0}.ngx-pagination a:hover,.ngx-pagination button:hover{background:#e6e6e6}.ngx-pagination .current{padding:.1875rem .625rem;background:#2199e8;color:#fefefe;cursor:default}.ngx-pagination .disabled{padding:.1875rem .625rem;color:#cacaca;cursor:default}.ngx-pagination .disabled:hover{background:transparent}.ngx-pagination a,.ngx-pagination button{cursor:pointer}.ngx-pagination .pagination-previous a:before,.ngx-pagination .pagination-previous.disabled:before{content:"\\ab";display:inline-block;margin-right:.5rem}.ngx-pagination .pagination-next a:after,.ngx-pagination .pagination-next.disabled:after{content:"\\bb";display:inline-block;margin-left:.5rem}.ngx-pagination .show-for-sr{position:absolute!important;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}.ngx-pagination .small-screen{display:none}@media screen and (max-width: 601px){.ngx-pagination.responsive .small-screen{display:inline-block}.ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next){display:none}}\n'],encapsulation:2,changeDetection:0}),i})(),G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[I],imports:[[u.ez]]}),i})();function V(i,s){1&i&&(e.TgZ(0,"div",49)(1,"span",50),e._uU(2,"Loading..."),e.qZA()())}const X=function(i,s){return{"bg-success":i,"bg-danger":s}},ee=function(i){return["/user/details/",i]};function te(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr",39)(1,"td",40),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td")(6,"div",41)(7,"input",42),e.NdJ("change",function(a){const l=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.onActivate(l.id,a))}),e.qZA()(),e.YNc(8,V,3,0,"div",43),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td",44)(16,"button",45),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.showValidation(r.id))}),e._UZ(17,"i",46),e.qZA(),e.TgZ(18,"a",47),e._UZ(19,"i",48),e.qZA()()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.xp6(2),e.AsE("",t.nom," ",t.prenom,""),e.xp6(2),e.Oqu(t.villeResidence?t.villeResidence:"........."),e.xp6(2),e.Q6J("hidden",n.loading&&t.id===n.currentId),e.xp6(1),e.s9C("id","flexSwitchCheckDefault-"+t.id),e.Q6J("ngClass",e.WLB(12,X,n.etat(t.active),!n.etat(t.active)))("ngModel",n.etat(t.active)),e.xp6(1),e.Q6J("ngIf",n.loading&&t.id===n.currentId),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.telephone),e.xp6(2),e.Oqu(t.dateNaiss),e.xp6(4),e.Q6J("routerLink",e.VKq(15,ee,t.id))}}const ne=function(i){return{itemsPerPage:5,currentPage:i}};function ie(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",33)(1,"table",34)(2,"thead")(3,"tr")(4,"th",35),e._uU(5,"Nom complet"),e.qZA(),e.TgZ(6,"th",35),e._uU(7,"Ville"),e.qZA(),e.TgZ(8,"th",35),e._uU(9,"Status"),e.qZA(),e.TgZ(10,"th",35),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"th",35),e._uU(13,"T\xe9l\xe9phone"),e.qZA(),e.TgZ(14,"th",35),e._uU(15,"Date naissance"),e.qZA(),e.TgZ(16,"th",35),e._uU(17,"Actions"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,te,20,17,"tr",36),e.ALo(20,"paginate"),e.qZA()(),e.TgZ(21,"div",37)(22,"pagination-controls",38),e.NdJ("pageChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.p=a)}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(19),e.Q6J("ngForOf",e.xi3(20,1,t.filteredData,e.VKq(4,ne,t.p)))}}function ae(i,s){1&i&&(e.TgZ(0,"div",51)(1,"div",52)(2,"span",50),e._uU(3,"Loading..."),e.qZA()()())}let se=(()=>{class i{constructor(t,n,a){this.userService=t,this.ptService=n,this.msService=a,this.data=[],this.searchText="",this.filteredData=[],this.loading=!1,this.currentId="",this.userCount=0,this.messageCount=0,this.partenaireCount=0,this.url=null,this.p=1}ngOnInit(){this.url=`${E.N.api}/${this.userService.uri()}/all?perPage=1000`,this.findAllUsers(),this.filterData(),this.loadStatistics()}loadStatistics(){this.msService.all().subscribe(t=>{this.messageCount=t.data.length}),this.ptService.all().subscribe(t=>{this.partenaireCount=t.data.length})}onPageChange(t){}fetchItemsForCurrentPage(){}findAllUsers(){this.searchText="",this.userService.all(this.url).subscribe({next:t=>{console.log("data data data : ",t.data),t.data&&Array.isArray(t.data.users)&&(this.userCount=t.data.users.length,this.data=t.data.users.slice().reverse(),this.filteredData=t.data.users.slice().reverse())},error:t=>{console.log("error ",t)}})}filterData(){if(this.data&&this.searchText){const t=this.searchText.toLowerCase();this.filteredData=this.data.filter(n=>n.villeResidence.toLowerCase()===t)}else this.filteredData=this.data}onActivate(t,n){this.currentId=t,this.loading=!0;const r={id:t,active:this.getEtat(n.target.checked)};this.userService.update(t,r).subscribe(l=>{this.loading=!1,this.findAllUsers(),console.log("data ",l.data)},l=>{this.loading=!1,console.log("erreur ",l)})}etat(t){return"active"===t}getEtat(t){return t?"active":"inactive"}onDelete(t){this.userService.delete(t).subscribe({next:n=>{this.findAllUsers(),console.log("data ",n.data)},error:n=>{console.log("erreur ",n)}})}showToast(t){U().success({title:"Succ\xe9s",message:t,position:"topRight"})}showValidation(t){U().question({timeout:0,close:!1,overlay:!0,displayMode:0,id:"question",zindex:999,title:"Suppression",message:"Voulez-vous supprimer ce compte ?",position:"center",buttons:[['<button class="font-bold btn btn-success" style="color: green!important">Confirmer</button>',(n,a)=>{this.onDelete(t),n.hide({transitionOut:"fadeOut"},a,"button"),this.showToast("Compte supprim\xe9 avec succ\xe9s.")},!0],['<button class="btn btn-danger" style="color: red!important">Annuler</button>',(n,a)=>{n.hide({transitionOut:"fadeOut"},a,"button")},!1]]})}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(w.K),e.Y36(S.g),e.Y36(O.e))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard"]],decls:78,vars:7,consts:[[1,"container-fluid","mybg-color","pb-5","mt-5","pt-5"],[1,"d-flex","justify-content-between","align-items-center"],["routerLink","/user/add","type","button",1,"btn","btn-warning","rounded-pill"],["aria-hidden","true",1,"fa","fa-add"],[1,"container","pl-2","pr-2","pt-2"],[1,"row"],[1,"col-xl-3","col-md-6","mb-4"],[1,"card","border-left-success","shadow","h-100","py-2"],[1,"card-body"],[1,"row","no-gutters","align-items-center"],[1,"col","mr-2"],[1,"text-xs","font-weight-bold","text-success","text-uppercase","mb-1"],[1,"h5","mb-0","font-weight-bold","text-gray-800"],[1,"container","pl-2","pr-2","pb-2","shadow","rounded-5","mb-2",2,"max-height","500px","overflow-y","auto"],[1,"row","row-cols-lg-auto","g-3","align-items-center","mt-3","mb-2"],[1,"col-md-6"],["for","inlineFormSelectPref",1,"visually-hidden"],["name","searchText","id","inlineFormSelectPref",1,"form-select",3,"ngModel","change","ngModelChange"],["selected","","value",""],["value","nantes"],["value","rennes"],["value","anger"],["value","le mans"],["value","brest"],["value","Caen"],["value","quimper"],["value","saint-nazaire"],["value","autres"],[1,"col-12"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa-solid","fa-arrows-rotate"],["class","table-responsive",4,"ngIf","ngIfElse"],["placeholder",""],[1,"table-responsive"],[1,"table","table-white","table-border-0","no-border"],["scope","col"],["class","",4,"ngFor","ngForOf"],[1,"justify-content-center","mx-auto"],["previousLabel","Pr\xe9c\xe9dent","nextLabel","Suivant",3,"pageChange"],[1,""],["scope","row"],[1,"form-check","form-switch",3,"hidden"],["type","checkbox","role","switch",1,"form-check-input",3,"ngClass","id","ngModel","change"],["class","spinner-grow spinner-grow-sm text-secondary","role","status",4,"ngIf"],[1,"gap-1","d-flex"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["type","button",1,"btn","btn-success","btn-sm",3,"routerLink"],["aria-hidden","true",1,"fa","fa-eye"],["role","status",1,"spinner-grow","spinner-grow-sm","text-secondary"],[1,"visually-hidden"],[1,"text-center","mx-auto","mt-5"],["role","status",1,"spinner-border","text-secondary"]],template:function(n,a){if(1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5"),e._uU(3,"Utilisateur"),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"i",3),e._uU(6," Ajouter utilisateur "),e.qZA()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11),e._uU(15," Total utilisateur "),e.qZA(),e.TgZ(16,"div",5)(17,"div",12),e._uU(18),e.qZA()()()()()()(),e.TgZ(19,"div",6)(20,"div",7)(21,"div",8)(22,"div",9)(23,"div",10)(24,"div",11),e._uU(25," Total messages "),e.qZA(),e.TgZ(26,"div",12),e._uU(27),e.qZA()()()()()(),e.TgZ(28,"div",6)(29,"div",7)(30,"div",8)(31,"div",9)(32,"div",10)(33,"div",11),e._uU(34," Total messages "),e.qZA(),e.TgZ(35,"div",12),e._uU(36),e.qZA()()()()()(),e.TgZ(37,"div",6)(38,"div",7)(39,"div",8)(40,"div",9)(41,"div",10)(42,"div",11),e._uU(43," Total partenaires "),e.qZA(),e.TgZ(44,"div",12),e._uU(45),e.qZA()()()()()()()(),e.TgZ(46,"div",13)(47,"form",14)(48,"div",15)(49,"label",16),e._uU(50,"Ville de r\xe9sidence"),e.qZA(),e.TgZ(51,"select",17),e.NdJ("change",function(){return a.filterData()})("ngModelChange",function(l){return a.searchText=l}),e.TgZ(52,"option",18),e._uU(53,"S\xe9lectionnez une ville..."),e.qZA(),e.TgZ(54,"option",19),e._uU(55,"Nantes"),e.qZA(),e.TgZ(56,"option",20),e._uU(57,"Rennes"),e.qZA(),e.TgZ(58,"option",21),e._uU(59,"Anger"),e.qZA(),e.TgZ(60,"option",22),e._uU(61,"Le mans"),e.qZA(),e.TgZ(62,"option",23),e._uU(63,"Brest"),e.qZA(),e.TgZ(64,"option",24),e._uU(65,"Caen"),e.qZA(),e.TgZ(66,"option",25),e._uU(67,"Quimper"),e.qZA(),e.TgZ(68,"option",26),e._uU(69,"Saint-nazaire"),e.qZA(),e.TgZ(70,"option",27),e._uU(71,"Autres"),e.qZA()()(),e.TgZ(72,"div",28)(73,"button",29),e.NdJ("click",function(){return a.findAllUsers()}),e._UZ(74,"i",30),e.qZA()()(),e.YNc(75,ie,23,6,"div",31),e.YNc(76,ae,4,0,"ng-template",null,32,e.W1O),e.qZA()),2&n){const r=e.MAs(77);e.xp6(18),e.hij(" ",a.userCount," "),e.xp6(9),e.hij(" ",a.messageCount," "),e.xp6(9),e.Oqu(a.messageCount),e.xp6(9),e.hij(" ",a.partenaireCount," "),e.xp6(6),e.Q6J("ngModel",a.searchText),e.xp6(24),e.Q6J("ngIf",a.data&&a.data.length>0)("ngIfElse",r)}},dependencies:[u.mk,u.sg,u.O5,d.rH,m._Y,m.YN,m.Kr,m.Wl,m.EJ,m.JJ,m.JL,m.On,m.F,W,j]})}return i})();const oe=[{path:"",component:_,canActivate:[o(5240).a],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:se},{path:"user",loadChildren:()=>Promise.all([o.e(592),o.e(107)]).then(o.bind(o,1107)).then(i=>i.UserModule)},{path:"message",loadChildren:()=>o.e(425).then(o.bind(o,5425)).then(i=>i.MessageModule)},{path:"partenaire",loadChildren:()=>Promise.all([o.e(592),o.e(881)]).then(o.bind(o,1881)).then(i=>i.PartenaireModule)}]}];let le=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(oe),d.Bz]})}return i})();var ce=o(1741);let ue=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[u.ez,le,m.u5,m.UX,ce.W,G]})}return i})()},6199:(A,x,o)=>{o.d(x,{e:()=>b});var u=o(2671),d=o(2340),h=o(1571),e=o(529);let b=(()=>{class g extends u.v{uri(){return"messages"}constructor(c){super(c),this.http=c}replay(c){return this.http.post(`${d.N.api}/${this.uri()}/replay`,c)}static#e=this.\u0275fac=function(_){return new(_||g)(h.LFG(e.eN))};static#t=this.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},4873:(A,x,o)=>{o.d(x,{g:()=>b});var u=o(2340),d=o(2671),h=o(1571),e=o(529);let b=(()=>{class g extends d.v{uri(){return"partenaires"}constructor(c){super(c),this.http=c}all(c=null){return null==c&&(c=`${u.N.api}/${this.uri()}/allByUser`),this.http.get(`${c}`)}byId(c){return this.http.get(`${u.N.api}/${this.uri()}/${c}`)}static#e=this.\u0275fac=function(_){return new(_||g)(h.LFG(e.eN))};static#t=this.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},8613:(A,x,o)=>{o.d(x,{K:()=>b});var u=o(2340),d=o(2671),h=o(1571),e=o(529);let b=(()=>{class g extends d.v{uri(){return"users"}constructor(c){super(c),this.http=c}update(c,_){return this.http.put(`${u.N.api}/${this.uri()}/${c}`,_)}transaction(){return this.http.post(`${u.N.api}/transactions`,{})}all(c=null){return null==c&&(c=`${u.N.api}/${this.uri()}/all`),this.http.get(`${c}`)}getUser(){const c=localStorage.getItem("userconnected");return c?JSON.parse(c):null}static#e=this.\u0275fac=function(_){return new(_||g)(h.LFG(e.eN))};static#t=this.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()}}]);