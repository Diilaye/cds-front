"use strict";(self.webpackChunkcds_front=self.webpackChunkcds_front||[]).push([[328],{3328:(I,u,r)=>{r.r(u),r.d(u,{UserModule:()=>C});var l=r(6895),o=r(646),e=r(1571);let p=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],decls:1,vars:0,template:function(s,i){1&s&&e._UZ(0,"router-outlet")},dependencies:[o.lC]})}return n})();var c=r(2340),g=r(8613),h=r(2671);let m=(()=>{class n extends h.v{constructor(){super(...arguments),this.plansabonnements=[{id:"1",name_plan:"Personne moins de 30 ans",description:"1 mois",montant:"45"},{id:"2",name_plan:"Personne plus de 30 ans",description:"3 mois",montant:"60"},{id:"3",name_plan:"Couple seul (sans enfants)",description:"3 mois",montant:"80"},{id:"4",name_plan:"Couple avec enfants",description:"+10 par enfant de moins de 18 ans",montant:"70"},{id:"5",name_plan:"Famille mono parentale",description:"+10 par enfant de moins de 18 ans",montant:"70"}]}uri(){return"typeabonnements"}static#e=this.\u0275fac=function(){let t;return function(i){return(t||(t=e.n5z(n)))(i||n)}}();static#t=this.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f=r(6199),v=r(4873);function Z(n,a){1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"img",22),e.qZA(),e.TgZ(3,"div",11)(4,"div",23),e._UZ(5,"span",24),e.qZA(),e.TgZ(6,"p",25),e._UZ(7,"span",26)(8,"span",27)(9,"span",27)(10,"span",28)(11,"span",29),e.qZA()()())}const b=function(n,a){return{"text-bg-success":n,"text-bg-danger":a}};function x(n,a){if(1&n&&(e.TgZ(0,"div",20)(1,"div",21),e._UZ(2,"img",30),e.qZA(),e.TgZ(3,"div",11)(4,"div",23),e._uU(5),e.qZA(),e.TgZ(6,"p")(7,"strong"),e._uU(8,"Type d'abonnement : "),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p")(11,"strong"),e._uU(12,"Email : "),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"p")(15,"strong"),e._uU(16,"T\xe9l\xe9phone : "),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"p")(19,"strong"),e._uU(20,"Adresse : "),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"p")(23,"strong"),e._uU(24,"Status : "),e.qZA(),e.TgZ(25,"span",31),e._uU(26),e.qZA()()()()),2&n){const t=e.oxw();let s;e.xp6(2),e.s9C("src",null!==(s=null==t.userDetails||null==t.userDetails.profile?null:t.userDetails.profile.url)&&void 0!==s?s:"assets/images/bg.jpg",e.LSH),e.xp6(3),e.AsE(" ",null==t.userDetails?null:t.userDetails.prenom," ",null==t.userDetails?null:t.userDetails.nom," "),e.xp6(4),e.hij(" ",t.typeabonnements[+(null==t.userDetails?null:t.userDetails.typeAbonnement)-1].name_plan,""),e.xp6(4),e.hij(" ",null==t.userDetails?null:t.userDetails.email,""),e.xp6(4),e.hij(" ",null==t.userDetails?null:t.userDetails.telephone,""),e.xp6(4),e.AsE(" ",null==t.userDetails?null:t.userDetails.pays," ",null==t.userDetails?null:t.userDetails.ville," "),e.xp6(4),e.Q6J("ngClass",e.WLB(10,b,!t.inactive,t.inactive)),e.xp6(1),e.hij(" ",null==t.userDetails?null:t.userDetails.active," ")}}const y=function(){return["/partenaire/list"]};function U(n,a){if(1&n&&(e.TgZ(0,"div",8)(1,"h6",9),e._uU(2,"Partenaires"),e.qZA(),e.TgZ(3,"span",10),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.Q6J("routerLink",e.DdM(2,y)),e.xp6(4),e.Oqu(t.partenaireLength)}}function A(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"h6",9),e._uU(2,"Partenaires"),e.qZA(),e.TgZ(3,"span",10),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.partenaireLength)}}function D(n,a){1&n&&(e.TgZ(0,"div",32),e._uU(1," On \xe9tudie votre adh\xe9sion , vous recevez un message une fois activ\xe9. "),e.qZA())}const T=function(){return["/message/recive"]},_=[{path:"",component:p,children:[{path:"details/:id",component:(()=>{class n{constructor(t,s,i,d,w,z){this.userService=t,this.typeASer=s,this.route=i,this.router=d,this.messageS=w,this.ptService=z,this.loading=!1,this.typeabonnements=[],this.messageLength=0,this.partenaireLength=0,this.url="",this.urlp="",this.autorize=!0}ngOnInit(){this.typeabonnements=this.typeASer.plansabonnements,this.getOneUser(),this.url=`${c.N.api}/messages/allUser`,this.urlp=`${c.N.api}/partenaires/allByUser`,this.getMessages(),this.getPartenaires()}getOneUser(){this.loading=!0,this.autorize=!1,console.log("breukh avant "),this.route.paramMap.subscribe(t=>{this.userId=t.get("id"),console.log("User ID:",this.userId),this.userService.byId(this.userId).subscribe(s=>{this.loading=!1,this.userDetails=s.data.users,this.userconnected=this.userService.getUser()?.user,console.log("userconnected ",this.userconnected),this.autorize="utilisateur"==this.userconnected?.role,console.log("User Details:",s),console.log("after"),console.log("after autorize ",this.autorize)},s=>{this.loading=!1,console.log("erreur ",s)})})}getPartenaires(){this.ptService.all(this.urlp).subscribe({next:t=>{this.partenaireLength=t.data.length??0},error:t=>{console.log("error ",t)}})}getMessages(){this.messageS.all(this.url).subscribe({next:t=>{this.messageLength=t.data.length??0},error:t=>{console.log("error ",t)}})}get role(){return this.userconnected&&"utilisateur"===this.userconnected?.role}get inactive(){return"inactive"===this.userDetails?.active}abonnement(){this.inactive||this.userService.transaction().subscribe({next:t=>{console.log("data ",t.data.url),window.open(t.data.url,"_blank")},error:t=>{console.log("error ",t)}})}static#e=this.\u0275fac=function(s){return new(s||n)(e.Y36(g.K),e.Y36(m),e.Y36(o.gz),e.Y36(o.F0),e.Y36(f.e),e.Y36(v.g))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-details"]],decls:31,vars:11,consts:[[1,"container-fluid","mybg-color","mt-5","pt-5"],[1,"row","d-flex","justify-content-center","align-items-center","mybg-color","gap-2"],[1,"col-md","mx-auto","mb-4","shadow","rounded-3"],["class","row  ","style","border-radius: 100%;",4,"ngIf"],[1,"col-md","mx-auto"],[1,"row"],[1,"col",3,"hidden"],[1,"card","border-0","cursor-pointer","mb-4","bg-body-white","rounded",2,"height","10rem","cursor","pointer"],[1,"d-flex","shadow","rounded-4","flex-column","justify-content-center","align-items-center","h-100",3,"routerLink"],[1,"card-title"],[1,"badge","bg-danger"],[1,"col"],["class","d-flex shadow rounded-4 flex-column justify-content-center align-items-center h-100",3,"routerLink",4,"ngIf"],["class","d-flex shadow rounded-4 flex-column justify-content-center align-items-center h-100",4,"ngIf"],[1,"card","border-0","cursor-pointer","mb-5","bg-body-white","rounded",2,"height","10rem","cursor","pointer"],[1,"d-flex","shadow","rounded-4","flex-column","justify-content-center","align-items-center","h-100"],[1,"card","border-0","cursor-pointer","mb-5","bg-body-white","rounded",2,"height","10rem","cursor","pointer",3,"click"],[1,"card-title","text-center"],[1,"row","mx-auto","d-flex","justify-content-center","align-items-center","mb-4","gap-2",3,"hidden"],["class","mx-auto text-center fs-4",4,"ngIf"],[1,"row",2,"border-radius","100%"],[1,"col","mx-auto"],["src","assets/images/bg.jpg","height","300","width","300","alt","...",1,""],[1,"fs-3","fw-bold","mb-4","text-capitalize"],[1,"placeholder","col-6"],[1,"placeholder-glow"],[1,"placeholder","col-7","bg-secondary"],[1,"placeholder","col-4","bg-secondary"],[1,"placeholder","col-6","bg-secondary"],[1,"placeholder","col-8","bg-secondary"],["height","300","width","300","alt","...",1,"",3,"src"],[1,"badge",3,"ngClass"],[1,"mx-auto","text-center","fs-4"]],template:function(s,i){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Z,12,0,"div",3),e.YNc(4,x,27,13,"div",3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h6",9),e._uU(11,"Messages"),e.qZA(),e.TgZ(12,"span",10),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",11)(15,"div",7),e.YNc(16,U,5,3,"div",12),e.YNc(17,A,5,1,"div",13),e.qZA()()(),e.TgZ(18,"div",5)(19,"div",11)(20,"div",14)(21,"div",15)(22,"h6",9),e._uU(23,"Profil"),e.qZA()()()(),e.TgZ(24,"div",6)(25,"div",16),e.NdJ("click",function(){return i.abonnement()}),e.TgZ(26,"div",15)(27,"h6",17),e._uU(28,"Payez votre abonnemnt"),e.qZA()()()()()()(),e.TgZ(29,"div",18),e.YNc(30,D,2,0,"div",19),e.qZA()()),2&s&&(e.xp6(3),e.Q6J("ngIf",i.loading),e.xp6(1),e.Q6J("ngIf",!i.loading),e.xp6(3),e.Q6J("hidden",!i.autorize),e.xp6(2),e.Q6J("routerLink",e.DdM(10,T)),e.xp6(4),e.Oqu(i.messageLength),e.xp6(3),e.Q6J("ngIf",!i.inactive),e.xp6(1),e.Q6J("ngIf",i.inactive),e.xp6(7),e.Q6J("hidden",!i.autorize),e.xp6(5),e.Q6J("hidden",!i.autorize),e.xp6(1),e.Q6J("ngIf",i.role&&i.inactive))},dependencies:[l.mk,l.O5,o.rH],styles:["*[_ngcontent-%COMP%]{background-color:#394f47}"]})}return n})()}]}];let q=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[o.Bz.forChild(_),o.Bz]})}return n})(),C=(()=>{class n{static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[l.ez,q]})}return n})()}}]);