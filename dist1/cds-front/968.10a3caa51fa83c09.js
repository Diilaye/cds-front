"use strict";(self.webpackChunkcds_front=self.webpackChunkcds_front||[]).push([[968],{5968:(L,p,s)=>{s.r(p),s.d(p,{PartenaireModule:()=>R});var d=s(6895),u=s(646),e=s(1571);let f=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-partenaire"]],decls:1,vars:0,template:function(r,a){1&r&&e._UZ(0,"router-outlet")},dependencies:[u.lC]})}return n})();var o=s(433),m=s(4873),h=s(2965),g=s(629);function _(n,l){if(1&n&&(e.TgZ(0,"div",51),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.errorMessage," ")}}function v(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le nom "),e.qZA())}function Z(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le pr\xe9nom "),e.qZA())}function b(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le type "),e.qZA())}function A(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le sexe "),e.qZA())}function x(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le Num\xe9ro de t\xe9l\xe9phone "),e.qZA())}function T(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le pays "),e.qZA())}function y(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner la ville "),e.qZA())}function U(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le rue "),e.qZA())}function q(n,l){1&n&&(e.TgZ(0,"div",52),e._uU(1," Renseigner le Num\xe9ro s\xe9curit\xe9 "),e.qZA())}function C(n,l){1&n&&e._UZ(0,"span",53)}function S(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1,"Valider "),e.qZA())}function N(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"h5",12),e._uU(3,"Ajout partenaire "),e.qZA(),e.TgZ(4,"form",13),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSubmit())}),e.YNc(5,_,2,1,"div",14),e.TgZ(6,"div",15)(7,"label",16),e._uU(8,"Nom"),e.qZA(),e._UZ(9,"input",17),e.YNc(10,v,2,0,"div",18),e.qZA(),e.TgZ(11,"div",15)(12,"label",16),e._uU(13,"Pr\xe9nom"),e.qZA(),e._UZ(14,"input",19),e.YNc(15,Z,2,0,"div",18),e.qZA(),e.TgZ(16,"div",15)(17,"label",20),e._uU(18,"Type"),e.qZA(),e.TgZ(19,"select",21)(20,"option",22),e._uU(21,"Partenaire"),e.qZA(),e.TgZ(22,"option",23),e._uU(23,"Enfant"),e.qZA()(),e.YNc(24,b,2,0,"div",18),e.qZA(),e.TgZ(25,"div",15)(26,"label",24),e._uU(27,"Sexe"),e.qZA(),e.TgZ(28,"select",25)(29,"option",26),e._uU(30,"Homme"),e.qZA(),e.TgZ(31,"option",27),e._uU(32,"Femme"),e.qZA()(),e.YNc(33,A,2,0,"div",18),e.qZA(),e.TgZ(34,"div",28)(35,"label",29),e._uU(36,"T\xe9l\xe9phone"),e.qZA(),e._UZ(37,"input",30),e.YNc(38,x,2,0,"div",18),e.qZA(),e.TgZ(39,"div",28)(40,"label",31),e._uU(41,"Pays"),e.qZA(),e.TgZ(42,"select",32)(43,"option",33),e._uU(44,"France"),e.qZA(),e.TgZ(45,"option",34),e._uU(46,"Italie"),e.qZA(),e.TgZ(47,"option",35),e._uU(48,"Angleterre"),e.qZA(),e.TgZ(49,"option",36),e._uU(50,"Portugal"),e.qZA()(),e.YNc(51,T,2,0,"div",18),e.qZA(),e.TgZ(52,"div",37)(53,"label",38),e._uU(54,"Ville"),e.qZA(),e._UZ(55,"input",39),e.YNc(56,y,2,0,"div",18),e.qZA(),e.TgZ(57,"div",37)(58,"label",40),e._uU(59,"Rue"),e.qZA(),e._UZ(60,"input",41),e.YNc(61,U,2,0,"div",18),e.qZA(),e.TgZ(62,"div",37)(63,"label",42),e._uU(64,"Num\xe9ro s\xe9curit\xe9 sociale"),e.qZA(),e._UZ(65,"input",43),e.YNc(66,q,2,0,"div",18),e.qZA(),e.TgZ(67,"div",15)(68,"label",44),e._uU(69,"Profil"),e.qZA(),e.TgZ(70,"input",45),e.NdJ("change",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.displayFileName(a,1))}),e.qZA()(),e.TgZ(71,"div",15)(72,"label",44),e._uU(73,"Justificatif"),e.qZA(),e.TgZ(74,"input",46),e.NdJ("change",function(a){e.CHM(t);const i=e.oxw();return e.KtG(i.displayFileName(a,2))}),e.qZA()(),e.TgZ(75,"div",47)(76,"button",48),e.YNc(77,C,1,0,"span",49),e.YNc(78,S,2,0,"span",50),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(5),e.Q6J("ngIf",(null==t.nom?null:t.nom.invalid)&&((null==t.nom?null:t.nom.dirty)||(null==t.nom?null:t.nom.touched))),e.xp6(5),e.Q6J("ngIf",(null==t.prenom?null:t.prenom.invalid)&&((null==t.prenom?null:t.prenom.dirty)||(null==t.prenom?null:t.prenom.touched))),e.xp6(9),e.Q6J("ngIf",(null==t.type?null:t.type.invalid)&&((null==t.type?null:t.type.dirty)||(null==t.type?null:t.type.touched))),e.xp6(9),e.Q6J("ngIf",(null==t.sexe?null:t.sexe.invalid)&&((null==t.sexe?null:t.sexe.dirty)||(null==t.sexe?null:t.sexe.touched))),e.xp6(5),e.Q6J("ngIf",(null==t.telephone?null:t.telephone.invalid)&&((null==t.telephone?null:t.telephone.dirty)||(null==t.telephone?null:t.telephone.touched))),e.xp6(13),e.Q6J("ngIf",(null==t.pays?null:t.pays.invalid)&&((null==t.pays?null:t.pays.dirty)||(null==t.pays?null:t.pays.touched))),e.xp6(5),e.Q6J("ngIf",(null==t.ville?null:t.ville.invalid)&&((null==t.ville?null:t.ville.dirty)||(null==t.ville?null:t.ville.touched))),e.xp6(5),e.Q6J("ngIf",(null==t.rue?null:t.rue.invalid)&&((null==t.rue?null:t.rue.dirty)||(null==t.rue?null:t.rue.touched))),e.xp6(5),e.Q6J("ngIf",(null==t.numeroSecuriteSocial?null:t.numeroSecuriteSocial.invalid)&&((null==t.numeroSecuriteSocial?null:t.numeroSecuriteSocial.dirty)||(null==t.numeroSecuriteSocial?null:t.numeroSecuriteSocial.touched))),e.xp6(10),e.Q6J("disabled",t.loading||t.form.invalid),e.xp6(1),e.Q6J("ngIf",t.loading),e.xp6(1),e.Q6J("ngIf",!t.loading)}}function I(n,l){1&n&&(e.TgZ(0,"div",54),e._uU(1," Vous ne pouvez pas ajouter de partenaires. "),e.qZA())}let Y=(()=>{class n{constructor(t,r,a,i,c){this.ptService=t,this.fileService=r,this.authService=a,this.router=i,this.fb=c,this.loading=!1,this.errorMessage="",this.form=this.fb.group({type:["",o.kI.required],profile:[""],nom:["",o.kI.required],prenom:["",o.kI.required],telephone:["",o.kI.required],pays:["",o.kI.required],ville:["",o.kI.required],code_postal:[""],rue:["",o.kI.required],numero_rue:[""],numeroSecuriteSocial:["",o.kI.required],sexe:["",o.kI.required],justificatif:["",o.kI.required]})}ngOnInit(){this.getUserConnected()}getUserConnected(){this.authService.currentUser().subscribe({next:t=>{this.userconnected=t.data.user,console.log("error log ",t.data.user)},error:t=>{console.log("error log ",t)}})}get getNbrPartenaires(){return this.userconnected?.partenaires.length}get checkPartenaire(){let t=!1;switch(console.log("type a : ",this.userconnected?.typeAbonnement),this.userconnected?.typeAbonnement){case"3":t=this.userconnected?.partenaires.length<2,console.log("retour ",t);break;case"4":case"5":t=!0;break;default:t=!1}return t}get nom(){return this.form.get("nom")}get prenom(){return this.form.get("prenom")}get ville(){return this.form.get("ville")}get villeResidence(){return this.form.get("villeResidence")}get telephone(){return this.form.get("telephone")}get rue(){return this.form.get("rue")}get sexe(){return this.form.get("sexe")}get type(){return this.form.get("type")}get pays(){return this.form.get("pays")}get code_postal(){return this.form.get("code_postal")}get numeroSecuriteSocial(){return this.form.get("numeroSecuriteSocial")}displayFileName(t,r){console.log("Nom du fichier :",t.target.files[0].name);const i=t.target.files[0];if(i){const c=new FileReader;c.onloadend=()=>{this.saveFile(c.result,r)},c.readAsDataURL(i)}}saveFile(t,r){this.fileService.create({image:t}).subscribe({next:i=>{1===r?this.form.patchValue({profile:i.data.id}):2==r&&this.form.patchValue({justificatif:i.data.id}),console.log("data ",i.data.id)},error:i=>{console.error("file upload error:",i)}})}onSubmit(){let t=this.form.getRawValue();this.loading=!0,console.log("values form : ",t),this.ptService.create(t).subscribe(r=>{this.errorMessage="",console.log("data ",r.data),this.loading=!1,r.data.errors?this.errorMessage="Une erreur est survenue":this.router.navigateByUrl("/partenaire/list")},r=>{this.loading=!1,this.errorMessage="Une erreur est survenue",console.log("error ",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(m.g),e.Y36(h.I),e.Y36(g.e),e.Y36(u.F0),e.Y36(o.qu))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-add"]],decls:14,vars:2,consts:[[1,"container-fluid","mybg-color","pb-5","mt-5","pt-5"],[1,"d-flex","justify-content-start","gap-5","gx-5","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-secondary"],["routerLink","/partenaire/list"],["aria-current","page",1,"breadcrumb-item","active"],[1,"container","pl-2","pr-2","shadow","rounded-5",2,"max-height","500px","overflow-y","auto"],["class","card border-0",4,"ngIf","ngIfElse"],["message",""],[1,"card","border-0"],[1,"card-body"],[1,"card-title","text-center"],[1,"row","g-3",3,"formGroup","submit"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"col-md-6"],["for","objectEmail",1,"form-label"],["type","text","id","nom","formControlName","nom","placeholder","nom",1,"form-control"],["class","text-danger",4,"ngIf"],["type","text","id","prneom","formControlName","prenom","placeholder","prenom",1,"form-control"],["for","recive",1,"form-label"],["id","type","placeholder","Selectionner","formControlName","type",1,"form-select"],["value","partenaires"],["value","enfant"],["for","sexe",1,"form-label"],["id","sexe","placeholder","Selectionner","formControlName","sexe",1,"form-select"],["value","homme"],["value","femme"],[1,"col-sm-6"],["for","telephone",1,"form-label"],["type","text","id","telephone","formControlName","telephone","placeholder","t\xe9l\xe9phone",1,"form-control"],["for","pays",1,"form-label"],["id","sexe","placeholder","Selectionner","formControlName","pays",1,"form-select"],["selected","","value","france"],["value","italy"],["value","angleterre"],["value","portugal"],[1,"col-sm-4"],["for","ville",1,"form-label"],["type","text","id","ville","formControlName","ville","placeholder","ville",1,"form-control"],["for","rue",1,"form-label"],["type","text","id","rue","formControlName","rue","placeholder","rue",1,"form-control"],["for","numeroSecuriteSocial",1,"form-label"],["type","text","id","numeroSecuriteSocial","formControlName","numeroSecuriteSocial","placeholder","numeroSecuriteSocial",1,"form-control"],["for","formFile",1,"form-label"],["type","file","formControlName","profile","id","profil",1,"form-control",3,"change"],["type","file","id","justificatif","formControlName","justificatif",1,"form-control",3,"change"],[1,"col-12","justify-content-end","mt-3"],["type","submit",1,"btn","mybg-color","float-end","btn-lg",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-danger"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"fs4","text-center","p-4"]],template:function(r,a){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"nav",2)(4,"ol",3)(5,"li",4)(6,"a",5),e._uU(7,"Partenaire"),e.qZA()(),e.TgZ(8,"li",6),e._uU(9,"Ajout"),e.qZA()()()()()(),e.TgZ(10,"div",7),e.YNc(11,N,79,14,"div",8),e.YNc(12,I,2,0,"ng-template",null,9,e.W1O),e.qZA()),2&r){const i=e.MAs(13);e.xp6(11),e.Q6J("ngIf",a.checkPartenaire)("ngIfElse",i)}},dependencies:[d.O5,u.rH,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u],styles:[".mybg-color[_ngcontent-%COMP%]{background-color:#0f7231;color:#fff}"]})}return n})();var E=s(2340),J=s(8613);function k(n,l){1&n&&(e.TgZ(0,"div",13)(1,"div",14)(2,"span",15),e._uU(3,"Loading..."),e.qZA()()())}function F(n,l){if(1&n&&(e.TgZ(0,"tr",22)(1,"td",23),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td",24)(12,"button",25),e._UZ(13,"i",26),e.qZA(),e.TgZ(14,"button",27),e._UZ(15,"i",28),e.qZA(),e.TgZ(16,"a",29),e._UZ(17,"i",30),e.qZA()()()),2&n){const t=l.$implicit,r=l.index;e.xp6(2),e.hij("",r+1," "),e.xp6(2),e.AsE("",t.nom," ",t.prenom,""),e.xp6(2),e.Oqu(t.telephone),e.xp6(2),e.Oqu(t.type),e.xp6(2),e.Oqu(t.sexe)}}function j(n,l){if(1&n&&(e.TgZ(0,"div",18)(1,"table",19)(2,"thead")(3,"tr")(4,"th",20),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th",20),e._uU(7,"Nom & pr\xe9nom"),e.qZA(),e.TgZ(8,"th",20),e._uU(9,"T\xe9l\xe9phone"),e.qZA(),e.TgZ(10,"th",20),e._uU(11,"Type "),e.qZA(),e.TgZ(12,"th",20),e._uU(13,"Sexe"),e.qZA(),e.TgZ(14,"th",20),e._uU(15,"Actions"),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,F,18,6,"tr",21),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(17),e.Q6J("ngForOf",t.data)}}function w(n,l){1&n&&(e.TgZ(0,"div",13)(1,"p"),e._uU(2,"Aucune donn\xe9e disponible."),e.qZA()())}function Q(n,l){if(1&n&&(e.YNc(0,j,18,1,"div",16),e.YNc(1,w,3,0,"ng-template",null,17,e.W1O)),2&n){const t=e.MAs(2),r=e.oxw();e.Q6J("ngIf",r.data&&r.data.length>0)("ngIfElse",t)}}const P=[{path:"",component:f,children:[{path:"list",component:(()=>{class n{constructor(t,r,a,i,c){this.ptService=t,this.userService=r,this.route=a,this.location=i,this.authService=c,this.data=[],this.urlp="",this.loading=!1}ngOnInit(){this.urlp=`${E.N.api}/partenaires/allByUser`,this.ptService.sharedData&&(this.userId=this.ptService.sharedData),this.getOneUser(),this.getUserConnected()}goBack(){this.location.back()}getUserConnected(){this.authService.currentUser().subscribe({next:t=>{this.userconnected=t.data.user,console.log("error log ",t.data.user)},error:t=>{console.log("error log ",t)}})}getAll(){this.loading=!0,this.ptService.all(this.urlp).subscribe({next:t=>{this.loading=!1,console.log("data ",t.data),this.data=t.data},error:t=>{this.loading=!1,console.log("error ",t)}})}getOneUser(){this.loading=!0,console.log("breukh avant "),this.userService.byId(this.userId).subscribe({next:t=>{this.loading=!1,this.userDetails=t.data.users,this.data=t.data.users.partenaires},error:t=>{this.loading=!1,console.log("erreur ",t)}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(m.g),e.Y36(J.K),e.Y36(u.gz),e.Y36(d.Ye),e.Y36(g.e))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-list"]],decls:20,vars:2,consts:[[1,"container-fluid","mybg-color","pb-5","mt-5","pt-5"],[1,"d-flex","justify-content-start","gap-5","gx-5","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item","text-primary"],[2,"cursor","pointer",3,"click"],["aria-current","page",1,"breadcrumb-item","active","text-white"],[1,"d-flex","justify-content-between","align-items-center"],["type","button","routerLink","/partenaire/add",1,"btn","btn-warning","rounded-pill"],["aria-hidden","true",1,"fa","fa-add"],[1,"container","pl-2","pr-2","pb-2","shadow","rounded-5",2,"max-height","500px","overflow-y","auto"],["class","text-center mx-auto mt-5",4,"ngIf","ngIfElse"],["content",""],[1,"text-center","mx-auto","mt-5"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"],["class","table-responsive",4,"ngIf","ngIfElse"],["noData",""],[1,"table-responsive"],[1,"table","table-white","table-border-0","no-border"],["scope","col"],["class","",4,"ngFor","ngForOf"],[1,""],["scope","row"],[1,"gap-1","d-flex"],["type","button",1,"btn","btn-danger","btn-sm"],["aria-hidden","true",1,"fa","fa-trash"],["type","button",1,"btn","btn-warning","btn-sm"],[1,"fa-solid","fa-paperclip"],["type","button",1,"btn","btn-success","btn-sm"],["aria-hidden","true",1,"fa","fa-edit"]],template:function(r,a){if(1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"nav",2)(4,"ol",3)(5,"li",4)(6,"a",5),e.NdJ("click",function(){return a.goBack()}),e._uU(7,"retour"),e.qZA()(),e.TgZ(8,"li",6),e._uU(9,"Partenaires"),e.qZA()()()()(),e.TgZ(10,"div",7)(11,"h5"),e._uU(12,"Partenaires"),e.qZA(),e.TgZ(13,"button",8),e._UZ(14,"i",9),e._uU(15," Ajouter "),e.qZA()()(),e.TgZ(16,"div",10),e.YNc(17,k,4,0,"div",11),e.YNc(18,Q,3,2,"ng-template",null,12,e.W1O),e.qZA()),2&r){const i=e.MAs(19);e.xp6(17),e.Q6J("ngIf",a.loading)("ngIfElse",i)}},dependencies:[d.sg,d.O5,u.rH]})}return n})()},{path:"add",component:Y}]}];let M=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(P),u.Bz]})}return n})(),R=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[d.ez,M,o.UX]})}return n})()}}]);