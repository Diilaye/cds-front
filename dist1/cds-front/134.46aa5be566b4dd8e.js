"use strict";(self.webpackChunkcds_front=self.webpackChunkcds_front||[]).push([[134],{5134:(Z,v,a)=>{a.r(v),a.d(v,{SecureModule:()=>D});var i=a(6895),l=a(646),d=a(5481),t=a(1571),f=a(629);function u(n,c){1&n&&t._UZ(0,"div",10)}function b(n,c){if(1&n&&(t.TgZ(0,"a",12),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.Q6J("routerLink",e.link),t.xp6(1),t.hij(" ",e.name," ")}}function s(n,c){if(1&n&&(t.TgZ(0,"div",10),t.YNc(1,b,2,2,"a",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.menu)}}let h=(()=>{class n{constructor(e,o){this.router=e,this.authService=o,this.userconnected=d.g.user,this.menu=[],this.menu=[{name:"Dashbord",link:"/dashboard",acces:"super"},{name:"Utilisateur",link:"/dashboard",acces:"super"},{name:"Message",link:"/message/list",acces:"super"}]}ngOnInit(){this.getUserConnected()}getUserConnected(){this.authService.currentUser().subscribe({next:e=>{this.userconnected=e.data.user,console.log("error log ",e.data.user)},error:e=>{console.log("error log ",e)}})}logOut(){localStorage.removeItem("token"),localStorage.removeItem("userconnected"),d.g.user=null,this.router.navigate(["/"])}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(l.F0),t.Y36(f.e))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-secure"]],decls:14,vars:2,consts:[[1,"navbar","shadow","navbar-expand-lg","mybg-color","text-white","fixed-top"],[1,"container-fluid","texte-white"],["href","#",1,"navbar-brand","texte-white",2,"color","rgb(255, 255, 255)"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],["class","navbar-nav mx-auto",4,"ngIf"],[1,"d-flex","my-2","my-lg-0"],["type","button",1,"btn","btn-white","my-2","my-sm-0",2,"color","rgb(255, 255, 255)",3,"click"],["aria-hidden","true",1,"fa","fa-sign-out"],[1,"navbar-nav","mx-auto"],["class","nav-link active w-col","style","color: rgb(255, 255, 255);",3,"routerLink",4,"ngFor","ngForOf"],[1,"nav-link","active","w-col",2,"color","rgb(255, 255, 255)",3,"routerLink"]],template:function(o,r){1&o&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),t._uU(3,"ADMIN"),t.qZA(),t.TgZ(4,"button",3),t._UZ(5,"span",4),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,u,1,0,"div",6),t.YNc(8,s,2,1,"div",6),t.TgZ(9,"div",7)(10,"a",8),t.NdJ("click",function(){return r.logOut()}),t._UZ(11,"i",9),t._uU(12," D\xe9connexion "),t.qZA()()()()(),t._UZ(13,"router-outlet")),2&o&&(t.xp6(7),t.Q6J("ngIf",r.userconnected&&"super"!==r.userconnected.role),t.xp6(1),t.Q6J("ngIf",r.userconnected&&"super"===r.userconnected.role))},dependencies:[i.sg,i.O5,l.lC,l.rH]})}return n})();var T=a(8613),g=a(433);const A=function(n,c){return{"bg-success":n,"bg-danger":c}},x=function(n){return["/user/details/",n]};function U(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"tr",11)(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4,"Personne moins de 30 ans"),t.qZA(),t.TgZ(5,"td")(6,"div",13)(7,"input",14),t.NdJ("change",function(r){const m=t.CHM(e).$implicit,I=t.oxw(2);return t.KtG(I.onActivate(m.id,r))}),t.qZA()()(),t.TgZ(8,"td"),t._uU(9),t.qZA(),t.TgZ(10,"td"),t._uU(11),t.qZA(),t.TgZ(12,"td"),t._uU(13),t.qZA(),t.TgZ(14,"td",15)(15,"button",16),t._UZ(16,"i",17),t.qZA(),t.TgZ(17,"button",18),t._UZ(18,"i",19),t.qZA(),t.TgZ(19,"a",20),t._UZ(20,"i",21),t.qZA()()()}if(2&n){const e=c.$implicit,o=t.oxw(2);t.xp6(2),t.AsE("",e.nom," ",e.prenom," "),t.xp6(5),t.s9C("id","flexSwitchCheckDefault-"+e.id),t.Q6J("ngClass",t.WLB(9,A,o.etat(e.active),!o.etat(e.active)))("ngModel",o.etat(e.active)),t.xp6(2),t.Oqu(e.email),t.xp6(2),t.Oqu(e.telephone),t.xp6(2),t.Oqu(e.dateNaiss),t.xp6(6),t.Q6J("routerLink",t.VKq(12,x,e.id))}}function C(n,c){if(1&n&&(t.TgZ(0,"div",7)(1,"table",8)(2,"thead")(3,"tr")(4,"th",9),t._uU(5,"Nom complet"),t.qZA(),t.TgZ(6,"th",9),t._uU(7,"Type d'abonnement"),t.qZA(),t.TgZ(8,"th",9),t._uU(9,"Status"),t.qZA(),t.TgZ(10,"th",9),t._uU(11,"Email"),t.qZA(),t.TgZ(12,"th",9),t._uU(13,"T\xe9l\xe9phone"),t.qZA(),t.TgZ(14,"th",9),t._uU(15,"Date naissance"),t.qZA(),t.TgZ(16,"th",9),t._uU(17,"Actions"),t.qZA()()(),t.TgZ(18,"tbody"),t.YNc(19,U,21,14,"tr",10),t.qZA()()()),2&n){const e=t.oxw();t.xp6(19),t.Q6J("ngForOf",e.data)}}function y(n,c){1&n&&(t.TgZ(0,"div",22)(1,"div",23)(2,"span",24),t._uU(3,"Loading..."),t.qZA()()())}let S=(()=>{class n{constructor(e){this.userService=e,this.data=[]}ngOnInit(){this.findAllUsers()}findAllUsers(){this.userService.all().subscribe(e=>{console.log("data data data : ",e.data),this.data=e.data.users},e=>{console.log("error ",e)})}onActivate(e,o){const p={id:e,active:this.getEtat(o.target.checked)};this.userService.update(e,p).subscribe(m=>{this.findAllUsers(),console.log("data ",m.data)},m=>{console.log("erreur ",m)})}etat(e){return"active"===e}getEtat(e){return e?"active":"inactive"}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(T.K))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:11,vars:2,consts:[[1,"container-fluid","mybg-color","pb-5","mt-5","pt-5"],[1,"d-flex","justify-content-between","align-items-center"],["type","button",1,"btn","btn-warning","rounded-pill"],["aria-hidden","true",1,"fa","fa-add"],[1,"container","pl-2","pr-2","pb-2","shadow","rounded-5",2,"max-height","500px","overflow-y","auto"],["class","table-responsive",4,"ngIf","ngIfElse"],["placeholder",""],[1,"table-responsive"],[1,"table","table-white","table-border-0","no-border"],["scope","col"],["class","",4,"ngFor","ngForOf"],[1,""],["scope","row"],[1,"form-check","form-switch"],["type","checkbox","role","switch",1,"form-check-input",3,"ngClass","id","ngModel","change"],[1,"gap-1","d-flex"],["type","button",1,"btn","btn-danger","btn-sm"],["aria-hidden","true",1,"fa","fa-trash"],["type","button",1,"btn","btn-warning","btn-sm"],[1,"fas","fa-edit"],["type","button",1,"btn","btn-success","btn-sm",3,"routerLink"],["aria-hidden","true",1,"fa","fa-eye"],[1,"text-center","mx-auto","mt-5"],["role","status",1,"spinner-border","text-secondary"],[1,"visually-hidden"]],template:function(o,r){if(1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Utilisateur"),t.qZA(),t.TgZ(4,"button",2),t._UZ(5,"i",3),t._uU(6," Ajouter utilisateur "),t.qZA()()(),t.TgZ(7,"div",4),t.YNc(8,C,20,1,"div",5),t.YNc(9,y,4,0,"ng-template",null,6,t.W1O),t.qZA()),2&o){const p=t.MAs(10);t.xp6(8),t.Q6J("ngIf",r.data&&r.data.length>0)("ngIfElse",p)}},dependencies:[i.mk,i.sg,i.O5,l.rH,g.Wl,g.JJ,g.On]})}return n})();const E=[{path:"",component:h,canActivate:[a(5240).a],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:S},{path:"user",loadChildren:()=>Promise.all([a.e(592),a.e(328)]).then(a.bind(a,3328)).then(n=>n.UserModule)},{path:"message",loadChildren:()=>Promise.all([a.e(592),a.e(425)]).then(a.bind(a,5425)).then(n=>n.MessageModule)},{path:"partenaire",loadChildren:()=>Promise.all([a.e(592),a.e(968)]).then(a.bind(a,5968)).then(n=>n.PartenaireModule)}]}];let M=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(E),l.Bz]})}return n})(),D=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[i.ez,M,g.u5,g.UX]})}return n})()},8613:(Z,v,a)=>{a.d(v,{K:()=>f});var i=a(2340),l=a(2671),d=a(1571),t=a(529);let f=(()=>{class u extends l.v{uri(){return"users"}constructor(s){super(s),this.http=s}update(s,h){return this.http.put(`${i.N.api}/${this.uri()}/${s}`,h)}transaction(){return this.http.post(`${i.N.api}/transactions`,{})}all(s=null){return null==s&&(s=`${i.N.api}/${this.uri()}/all`),this.http.get(`${s}`)}getUser(){const s=localStorage.getItem("userconnected");return s?JSON.parse(s):null}static#t=this.\u0275fac=function(h){return new(h||u)(d.LFG(t.eN))};static#e=this.\u0275prov=d.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()}}]);